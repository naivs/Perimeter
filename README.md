# Perimeter

датчик температуры, влажности и атмосферного давления.

железо:

	- датчик DHT-22 (температура (-40 … 125), влажность (0%-100%));
	- датчик BMP180 (атмосферное давление (300 ~ 1100hPa), температура (-40 … +85));
	- контроллер ESP-12-e;
	- стабилизатор напряжения до 3.3v AMS1117 (800 mA);
	- аккумулятор samsung;
	- монтажная плата;

софт:

	- прошивка NODE-MCU на ESP-12-e;
	- rest-сервер для сбора данных;

rest-сервер:

	- создание устройств (название, тип устройства, сетевой адрес, и т.д.);
	- сохранение настроенных устройств в базу данных;
	- вывод списка настроенных устройств;
	- изменение параметров настроенных устройств;
	- страницы взаимодействия для каждого типа устройств;

rest команды для метеостанции:

	- получить температуру по цельсию (DTH-22);
	- получить температуру по фаренгейту (DTH-22);
	- получить температуру по цельсию (BMP180);
	- получить температуру по фаренгейту (BMP180);
	- получить атмосферное давление в мм ртутного столба;
	- получить атмосферное давление в кгс/см² (ат);
	- получить атмосферное давление в hPa;
	- получить влажность в % (относительная влажность);
	- получить влажность в кг/м³ (абсолютная влажность);
	- получить напряжение батареи (нет вольтметра);

логирование данных в базу:
	сервер будет производить опрос всех датчиков с некой периодичностью и сохранять результаты в базу.

подсистема отчетов. perimeter должен реализовыать построение различных отчетов:

	- графический отчет по каждому отдельному параметру за временной промежуток;
	- общий графический отчет за временной промежуток;
	- график зависимостей параметров друг от друга за временной промежуток;

питание системы:

	- источник батарея 9V;
	- ESP-12-e  3.3V        170 mA (max)
	- DHT-22    3.3V-5V     1.5 mA
	- BMP-180   3.3V        1 mA
	- всего                 172.5 mA

добавление нового устройства форма:

	- id устройства будет сформировано автоматически
	- название устройства;
	- тип устройства из выпадающего списка;
	- описание устройства
	
как типы устройств будут добавляться в базу?

	создаются через html форму. Необходимо будет выбрать сенсоры и дочерние устройства. Форма должна иметь поля:
		- имя типа устройства;
		- таблица сенсоров;
		- таблица дочерних устройств;
		- описание типа устройства
		
как типы сенсоров будут добавляться в базу?

	они уже будут в базе, добавляются через liquibase.
	
как сенсоры будут добавляться в базу?

	- создаются через форму. Форма будет иметь поля:
	    - имя сенсора;
	    - выпадающий список с типами сенсоров;
	    - описание сенсора

нужна реализация панелей для работы с каждым типом устройств.



главное меню системы:

	- dashboard
	- smart home
	    - devices
	    - reports
	    - settings
	- finance
	    - in
	    - out
	    - reports
	- library
	- media share
	    - music
	    - video
	    - photo
	    - files
	- git
	- calendar/events (by topics)
	- notifications

база данных smart_home - для работы с устройствами "умного дома"